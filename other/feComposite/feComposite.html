<!--            Author: Richard Myatt
                Date: 24 November 2018

                A demo to show the feComposite filter in use based on a similar
                demo at http://apike.ca/prog_svg_filter_feComposite.html
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="css/feComposite.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>SVG - using feComposite</title>
</head>
<body>

  <h1>SVG - using the feComposite filter</h1>

  <!-- container for our demo -->
  <div class="container">

    <svg width="100%" height="100%" viewBox="0 0 1210 810"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <title>SVG - using the feComposite filter</title>

        <!-- define the various filters -->
        <defs>

          <filter id="fOver" filterUnits="userSpaceOnUse">
            <feImage xlink:href="images/bird.png" result="bird"
              x="0" y="0" width="400" height="400" />
            <feImage xlink:href="images/circle.svg" result="disc"
              x="0" y="0" width="400" height="400" />
            <feComposite in="bird" in2="disc" operator="over" />
          </filter>

          <filter id="fIn" filterUnits="userSpaceOnUse">
            <feImage xlink:href="images/bird.png" result="bird"
              x="0" y="0" width="400" height="400" />
            <feImage xlink:href="images/circle.svg" result="disc"
              x="0" y="0" width="400" height="400" />
            <feComposite in="bird" in2="disc" operator="in" />
          </filter>

          <filter id="fOut" filterUnits="userSpaceOnUse">
            <feImage xlink:href="images/bird.png" result="bird"
              x="0" y="0" width="400" height="400" />
            <feImage xlink:href="images/circle.svg" result="disc"
              x="0" y="0" width="400" height="400" />
            <feComposite in="bird" in2="disc" operator="out" />
          </filter>

          <filter id="fAtop" filterUnits="userSpaceOnUse">
            <feImage xlink:href="images/bird.png" result="bird"
              x="0" y="0" width="400" height="400" />
            <feImage xlink:href="images/circle.svg" result="disc"
              x="0" y="0" width="400" height="400" />
            <feComposite in="bird" in2="disc" operator="atop" />
          </filter>

          <filter id="fXor" filterUnits="userSpaceOnUse">
            <feImage xlink:href="images/bird.png" result="bird"
              x="0" y="0" width="400" height="400" />
            <feImage xlink:href="images/circle.svg" result="disc"
              x="0" y="0" width="400" height="400" />
            <feComposite in="bird" in2="disc" operator="xor" />
          </filter>

          <filter id="fArithmetic" filterUnits="userSpaceOnUse">
            <feImage xlink:href="images/bird.png" result="bird"
              x="0" y="0" width="400" height="400" />
            <feImage xlink:href="images/circle.svg" result="disc"
              x="0" y="0" width="400" height="400" />
            <feComposite in="bird" in2="disc" operator="arithmetic" k1="0" k2=".5" k3=".7" k4="0" />
          </filter>

        </defs>

        <!-- provide a white background -->
        <rect x="0" y="0" width="100%" height="100%"
          style="fill: #fff; stroke: none;" />

        <!-- render composite filter options -->
        <g filter="url(#fOver)" transform="translate(5 5)"></g>
        <g filter="url(#fIn)" transform="translate(405 5)"></g>
        <g filter="url(#fOut)" transform="translate(805 5)"></g>
        <g filter="url(#fAtop)" transform="translate(5 405)"></g>
        <g filter="url(#fXor)" transform="translate(405 405)"></g>
        <g filter="url(#fArithmetic)" transform="translate(805 405)"></g>

        <!-- draw grid -->
        <g id="grid"
          style="fill: none; stroke-width: 2; stroke: #000;">

          <rect x="5" y="5" width="1200" height="800" />
          <line x1="5" y1="405" x2="1205" y2="405" />
          <line x1="405" y1="5" x2="405" y2="805" />
          <line x1="805" y1="5" x2="805" y2="805" />

        </g>

        <!-- provide text -->
        <g id="text" text-anchor="middle"
          style="font-weight: bold; font-size: 1.5em;">

          <text x="205" y="55">operator="over"</text>
          <text x="605" y="55">operator="in"</text>
          <text x="1005" y="55">operator="out"</text>
          <text x="205" y="455">operator="atop"</text>
          <text x="605" y="455">operator="xor"</text>
          <text x="1005" y="455">operator="arithmetic"</text>

        </g>

    </svg>

  </div>

</body>
</html>
