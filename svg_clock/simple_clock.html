<!--            Author: Richard Myatt
                Date: 20 January 2019

                A simple clock written using SVG
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="css/simple_clock.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Simple Clock using SVG</title>
</head>
<body>

  <!-- provide a container to shape and style the clock -->
  <div class="container">

    <!-- provide a body for our clock -->
    <svg width="100%" height="100%" viewBox="0 0 440 440"
       xmlns="http://www.w3.org/2000/svg"
       xmlns:xlink="http://www.w3.org/1999/xlink"
       onload="init()">
       <title>Simple Clock</title>

       <defs>

         <!-- mask for body of clock -->
         <mask id="body">
           <rect x="0" y="0" width="440" height="440"
             style="fill: #fff;" />
           <circle cx="220" cy="220" r="191"
             style="fill: #000;" />
         </mask>

       </defs>

       <!-- body of clock -->
       <rect x="0" y="0" width="100%" height="100%"
         style="fill: lightyellow; stroke: none;" />

      <!-- the clock itself -->
      <svg x="20" y="20" width="400" height="400" viewBox="0 0 400 400"
         xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         onload=init()>
         <title>Simple Clock</title>

         <defs>

           <script type="text/javascript">
              // <![CDATA[
              function init() {

                // specify variables
                var newDate, seconds, minutes, hours;
                var sec_angle, min_angle, hour_angle;
                var useElem;

                // obtaine references to the DOM elements
                var second_hand = document.querySelector("#second-hand");
                var minute_hand = document.querySelector("#minute-hand");
                var hour_hand = document.querySelector("#hour-hand");

                // function to set the time on the clock
                function setTime() {
                  newDate = new Date();
                  seconds = newDate.getSeconds();
                  minutes = newDate.getMinutes();

                  hours   = newDate.getHours() <= 12 ? newDate.getHours() : newDate.getHours() - 12;
                  sec_angle = (seconds / 60) * 360;
                  min_angle = ((minutes + (seconds/60)) / 60 * 360);
                  hour_angle = ((hours + (minutes/60)) / 12 * 360);

                  second_hand.setAttribute("transform", "rotate("+ sec_angle +", 200, 200)");
                  minute_hand.setAttribute("transform", "rotate("+ min_angle +", 200, 200)");
                  hour_hand.setAttribute("transform", "rotate("+ hour_angle +", 200, 200)");
                }

                // initialize and animate the hands
                setTime();
                setInterval(setTime, 1000);
              }
              // ]]>
           </script>

           <!-- mask for background image - use authors avatar -->
           <mask id="img-mask">
             <rect width="400" height="400"
               style="fill: #222;" />
             ></rect>
           </mask>

         </defs>

         <!-- provide a background image -->
         <image width="400" height="400" href="https://www.sololearn.com/avatars/80109f91-7d02-4111-83af-b0fefd31ab34.jpg" mask="url(#img-mask)"></image>

         <!-- define inner boundary -->
         <circle cx="200" cy="200" r="190"
           style="fill: none; stroke: darkblue; stroke-width: 2;" />

         <!-- clock center -->
         <circle cx="200" cy="200" r="18" />

         <!-- twelve o'clock minute marker (not visible) -->
         <circle cx="200" cy="18" r="3"
           style="fill: darkblue;" id="minute-marker"/>

         <!-- twelve o'clock hour markers -->
         <path id="hour-marker" d="M 190 10 l 20 0 l -10 15 z"
           style="fill: darkblue;"/>

         <!-- remaining markers -->
         <use xlink:href="#hour-marker" transform="rotate(30 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(60 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(90 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(120 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(150 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(180 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(210 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(240 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(270 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(300 200 200)"/>
         <use xlink:href="#hour-marker" transform="rotate(330 200 200)"/>

         <!-- set minute markers -->
         <use xlink:href="#minute-marker" transform="rotate(6 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(12 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(18 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(24 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(36 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(42 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(48 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(54 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(66 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(72 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(78 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(84 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(96 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(102 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(108 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(114 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(126 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(132 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(138 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(144 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(156 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(162 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(168 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(174 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(186 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(192 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(198 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(204 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(216 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(222 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(228 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(234 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(246 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(252 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(258 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(264 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(276 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(282 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(288 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(294 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(306 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(312 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(318 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(324 200 200)"/>

         <use xlink:href="#minute-marker" transform="rotate(336 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(342 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(348 200 200)"/>
         <use xlink:href="#minute-marker" transform="rotate(354 200 200)"/>

         <!-- hour text -->
         <text style="fontFamily: 'Roboto Mono', monospace; fill: darkblue; font-weight: bold; font-size: 35px; text-anchor: middle;">
          <tspan x="200" y="60">12</tspan>
          <tspan x="365" y="210">3</tspan>
          <tspan x="45" y="210">9</tspan>
          <tspan x="200" y="370">6</tspan>
         </text>

         <!-- hour hand -->
         <g id="hour-hand"
           style="stroke: #000; stroke-width: 8; stroke-linecap: round;">
           <line x1="200" y1="200" x2="200" y2="100" />
           <line x1="200" y1="195" x2="200" y2="105"
              style="stroke: lightblue; stroke-width: 2;" />
         </g>

         <!-- minute hand -->
         <g id="minute-hand"
           style="stroke: #000; stroke-width: 8; stroke-linecap: round;">
           <line x1="200" y1="200" x2="200" y2="50" />
           <line x1="200" y1="195" x2="200" y2="55"
              style="stroke: lightblue; stroke-width: 2;" />
         </g>

         <!-- second hand -->
         <g id="second-hand"
           style="fill: #f00; stroke: #f00; stroke-width: 2;">
           <line x1="200" y1="220" x2="200" y2="30" />
           <circle cx="200" cy="200" r="8" />
           <circle cx="200" cy="225" r="5"
             style="fill: none;" />
         </g>

      </svg>

      <!-- body of clock -->
      <rect x="0" y="0"  width="100%" height="100%"
        style="fill: lightyellow;" mask="url(#body)" />

    </svg>

  </div>

</body>
</html>
