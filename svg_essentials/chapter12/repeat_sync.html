<!--        Author: Richard Myatt
            Date: 30 August 2018

            A demonstration of how an animation can be
            synchronized to a repeatCount.  Based on a
            similar example in chapter 12 of 'SVG
            Essentials' by J. David Eisenberg.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="css/repeat_sync.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>SVG sync with repeatCount</title>
</head>
<body>

  <h1>SVG sync with repeatCount</h1>

  <svg width="400" height="240" viewBox="0 0 220 120"
    xmlns="http://www.w3.org/2000/svg">
    <title>Synchronizing with repeatCount animation demo</title>

    <!-- give the canvas a white background -->
    <rect x="0" y="0" width="200" height="120"
      style="fill: #fff; stroke: none;" />

    <!-- animate circle with repeatCount of 3 -->
    <circle	cx="40"	cy="30"	r="15"
		style="fill:	none;	stroke:	red;">
		<animate	id="circleAnim"	attributeName="cx"	attributeType="XML"
				begin="0s"	dur="5s"	repeatCount="3"
				from="30"	to="175"	fill="freeze"/>
    </circle>

    <!-- synchronize the rectangle to start half way through -->
    <!-- the animation of the circle -->
    <rect	x="160"	y="80"	width="30"	height="30"
    		style="fill:	#ccf;	stroke:	black;">
    		<animate	attributeName="x"	attributeType="XML"
    				begin="circleAnim.repeat(1)+2.5s"	dur="5s"
    				from="160"	to="10"	fill="freeze"/>
    </rect>

  </svg>

  <div class="notes">
    <p>This demo illustrates how an animation can be synchronized in a case where one object has a repeat count.  In this case the circle has a repeatCount of 3 and the animation of the square is fired when the circle gets to a position half way through its cycle of 3.</p>

    <p>This animation is based on a similar example in chapter 12 of 'SVG Essentials' by J. David Eisenber.</p>

    <p>Please see accompanying code.</p>
  </div>

</body>
</html>
