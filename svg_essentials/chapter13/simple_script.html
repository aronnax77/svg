<!--          Author: Richard Myatt
              Date: 30 September 2018

              A simple example of the use of a script within an svg based on a
              similar example in chapter 13 of 'SVG Essentials' by J. David
              Eisenberg.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="css/simple_script.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>SVG Simple Script Example</title>
</head>
<body>

  <h1>SVG Simple Script Example</h1>

  <svg	width="450"	height="375"	viewBox="0	0	300	250"
  		xmlns="http://www.w3.org/2000/svg"
  		xmlns:xlink="http://www.w3.org/1999/xlink">
  		<title>SVG Simple Script Example</title>

      <!-- provide a white background -->
      <rect x="0" y="0" width="100%" height="100%"
        style="fill: #fff; stroke: none;" />

        <!-- draw an ellipse and extract details using a script -->
    		<ellipse id="shape" cx="150" cy="50" rx="120" ry="30"
				  style="stroke: gray;	fill:	#ff9;	stroke-width: 3"/>

      <!-- provide details of the ellipse in text -->
      <!-- title -->
  		<text		id="output"	x="10"	y="120"	style="font-size: 16px;">
  		  <tspan style="font-weight: bold;">Ellipse Data</tspan>
        <tspan style="font-weight: bold; font-size: 10px;">(generated by script)</tspan>

        <!-- placeholders for ellipse data -->
        <tspan id="cx" x="20" y="140"
          style="font-weight: normal; font-size: 10px;"></tspan>
        <tspan id="cy" x="20" y="155"
          style="font-weight: normal; font-size: 10px;"></tspan>
        <tspan id="rx" x="20" y="170"
          style="font-weight: normal; font-size: 10px;"></tspan>
        <tspan id="ry" x="20" y="185"
          style="font-weight: normal; font-size: 10px;"></tspan>
        <tspan id="stroke" x="20" y="200"
          style="font-weight: normal; font-size: 10px;"></tspan>
        <tspan id="strokeWidth" x="20" y="215"
          style="font-weight: normal; font-size: 10px;"></tspan>
        <tspan id="fill" x="20" y="230"
          style="font-weight: normal; font-size: 10px;"></tspan>
  		</text>

      <!-- javascript used to extract the details of the ellipse -->
      <script	type="application/ecmascript">
  		//	<![CDATA[          // to be used if special charachters are present
        // obtain references to the DOM elements
        var ellipse = document.querySelector("#shape");
        var cx = document.querySelector("#cx");
        var cy = document.querySelector("#cy");
        var rx = document.querySelector("#rx");
        var ry = document.querySelector("#ry");
        var stroke = document.querySelector("#stroke");
        var strokewidth = document.querySelector("#strokeWidth");
        var fill = document.querySelector("#fill");

        // prepare text entries
        var txtCx = "cx: " + shape.getAttribute("cx");
        var txtCy = "cy: " + shape.getAttribute("cy");
        var txtRx = "rx: " + shape.getAttribute("rx");
        var txtRy = "ry: " + shape.getAttribute("ry");
        var txtStroke = "stroke: " + shape.style.getPropertyValue("stroke");
        var txtStrokeWidth = "strokewidth: " + shape.style.getPropertyValue("stroke-width");
        var txtFill = "fill: " + shape.style.getPropertyValue("fill");

        // place text entries in the DOM
        cx.textContent = txtCx;
        cy.textContent = txtCy;
        rx.textContent = txtRx;
        ry.textContent = txtRy;
        stroke.textContent = txtStroke;
        strokewidth.textContent = txtStrokeWidth;
        fill.textContent = txtFill;
  				//	]]>
  		</script>
  </svg>

  <div class="notes">
    <p>A simple example of the use of javascript within the svg.  In this case the script reads the properties of the ellipse and presents these in the text below.  This example is based on a similar example in chapter 13 of 'SVG Essentials' by J. David Eisenberg.</p>

    <p>Please see accompanying code.</p>
  </div>

</body>
</html>
